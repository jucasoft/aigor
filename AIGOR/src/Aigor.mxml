<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       minWidth="955" minHeight="600">
    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <fx:Script>
		<![CDATA[
        import com.dehats.fgl.analysis.JavaParser;
        import com.dehats.fgl.analysis.PseudoVariable;
        import com.dehats.fgl.analysis.PseudoClass;

        import mx.collections.ArrayCollection;

        private function convert(event:MouseEvent):void {
            var result:* = new JavaParser().parseCode(sourceTextArea.text);
            ac = new ArrayCollection(PseudoClass(result[0]).properties);
            ac.filterFunction = filter;
            ac.refresh();
            propertyList.dataProvider = ac;
        }
        private var ac:ArrayCollection;
        private function lf(item:PseudoVariable):String {
            return item.name + ":" + item.type + " isGetSet: " + item.isGetSet;
        }

        private function filter(item:PseudoVariable):Boolean {
            if (!onlyIsGetSet.selected)
                return true;

            return item.isGetSet == onlyIsGetSet.selected
        }

        private function onlyIsGetSet_changeHandler(event:Event):void {
            ac.refresh();
        }

        ]]>
	</fx:Script>

    <s:VGroup width="100%" height="100%">
        <s:HGroup>
            <s:Button click="convert(event)"/>
        </s:HGroup>
        <s:HGroup width="100%" height="100%">
            <s:TextArea id="sourceTextArea" width="100%" height="100%"/>
            <s:VGroup>
                <s:CheckBox id="onlyIsGetSet" label="onlyIsGetSet" change="onlyIsGetSet_changeHandler(event)"/>
                <s:List id="propertyList" labelFunction="lf"/>
            </s:VGroup>
            <s:TextArea id="destinationTextArea" width="100%" height="100%"/>
        </s:HGroup>
    </s:VGroup>

</s:WindowedApplication>
